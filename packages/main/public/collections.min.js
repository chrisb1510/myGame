(function(){this.Boards=new Meteor.Collection("myboards",{transform:function(n){return new Board(n)}});Boards.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}});this.Users=new Meteor.Collection("myusers",{transform:function(n){return new User(n)}});Users.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}});this.Messages=new Meteor.Collection("chatmessages",{transform:function(n){return new Chatmessage(n)}});Messages.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}});this.Players=new Meteor.Collection("myplayers",{transform:function(n){return new Player(n)}});Players.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}});this.Player=function(){function n(n){var t;t=n!=null?n:{};this.number=t.number;this.name=t.name;this.typeName==null&&(this.typeName="Player");this.number==null&&(this.number="n/a");this.name==null&&(this.name="anon")}return n.prototype.clone=function(){return new n(this)},n.prototype.getTypeName=function(){return this.typeName},n.prototype.equals=function(n){return n.getTypeName()!==this.typeName?!1:EJSON.stringify(this)===EJSON.stringify(n)},n.prototype.toJSONValue=function(){return{_id:this._id,typeName:this.typeName,name:this.name,number:this.number}},EJSON.addType("Player",function(t){return console.log(t),new n(t)}),n}();this.Chatmessage=function(){function n(n){var t;t=n!=null?n:{};this.created=t.created;this.owner=t.owner;this.message=t.message;this.room=t.room;this.typeName==null&&(this.typeName="Chatmessage");this.created==null&&(this.created=new Date);this.owner==null&&(this.owner="admin");this.message==null&&(this.message="dEFAULT MESSAGE");this.room==null&&(this.room="main")}return n.prototype.clone=function(){return new n(this)},n.prototype.getTypeName=function(){return this.typeName},n.prototype.equals=function(n){return n.getTypeName()!==this.typeName?!1:EJSON.stringify(this)===EJSON.stringify(n)},n.prototype.toJSONValue=function(){return{_id:this._id,typeName:this.typeName,created:this.created,owner:this.owner,message:this.message}},EJSON.addType("Chatmessage",function(t){return console.log(t),new n(t)}),n}();this.Profile=function(){function n(n){var t;t=n!=null?n:{};this.name=t.name;this.avatar=t.avatar;this.totaltokens=t.totaltokens;this.gameslost=t.gameslost;this.gameswon=t.gameswon;this.currentroom=t.currentroom;this.typeName==null&&(this.typeName="Profile");this.name==null&&(this.name="anon");this.avatar="generic.png";this.totaltokens==null&&(this.totaltokens=0);this.gameslost==null&&(this.gameslost=0);this.gameswon==null&&(this.gameswon=0);this.currentroom==null&&(this.currentroom="main")}return n.prototype.clone=function(){return new n(this)},n.prototype.getTypeName=function(){return this.typeName},n.prototype.equals=function(n){return n.getTypeName()!==this.typeName?!1:EJSON.stringify(this)===EJSON.stringify(n)},n.prototype.toJSONValue=function(){return{typeName:this.typeName,name:this.name,avatar:this.avatar,totaltokens:this.totaltokens,gameslost:this.gameslost,gameswon:this.gameswon,currentroom:this.currentroom}},EJSON.addType("Profile",function(t){return console.log(t),new n(t)}),n}();this.User=function(){function n(n){var t;t=n!=null?n:{};this._id=t._id;this.username=t.username;this.password=t.password;this.profile=t.profile;this.typeName="User";this._id==null&&(this._id=null);this.username==null&&(this.username=1);this.password==null&&(this.password="default");this.profile==null&&(this.profile=new Profile)}return n.prototype.changeName=function(n){return this.profile.name=n,console.log("Hello"+this.profile.name)},n.prototype.addTokens=function(n){return this.profile.totaltokens+=n,console.log("you now have "+this.profile.totaltokens)},n.prototype.getGamestats=function(n){switch(n){case"both":return console.log("wins: "+this.profile.gameswon+", losses "+this.profile.gameslost);case"won":return console.log("won"+this.profile.gameswon);case"lost":return console.log("lost"+this.profile.gameslost)}},n.prototype.clone=function(){return new n(this)},n.prototype.getTypeName=function(){return this.typeName},n.prototype.equals=function(n){return n.getTypeName()!==this.typeName?!1:EJSON.stringify(this)===EJSON.stringify(n)},n.prototype.toJSONValue=function(){return{typeName:this.typeName,username:this.username,password:this.password,profile:this.profile}},EJSON.addType("User",function(t){return console.log(t),new n(t)}),n}();Meteor.isClient&&(Meteor.subscribe("chatmessages"),Meteor.subscribe("myusers"),Meteor.subscribe("myboards"),Meteor.subscribe("myplayers"),Meteor.methods({insertuser:function(n){return Users.insert(n,function(n,t){return n!=null?console.log(""+n):(console.log(t),t)})},insertchatmessage:function(n){return Messages.insert(n,function(n,t){return n!=null?console.log("chat insert error : "+n):(console.log("Message inserted : "+t),t)})},insertboard:function(n){return Boards.insert(n,function(n,t){return n!=null?console.log("insert board error: "+n):(console.log("board added "+t),t)})},insertplayer:function(n){return Players.insert(n,function(n,t){return n!=null?console.log("insert player error "+n):(console.log("wecome player "+t),t)})},clear:function(n){switch(n){case"boards":return Boards.remove({});case"players":return Players.remove({});case"users":return Users.remove({})}}}));this.defaultPlayer=new Player;this.defaultProfile=new Profile;this.defaultUser=new User;this.testProfile1=new Profile({_id:Meteor.uuid(),name:"testProfile1",avatar:"monkey.png",totaltokens:3,gameswon:2,gameslost:1,currentroom:"main"});this.testProfile2=testProfile1.clone();testProfile2.name="testProfile2";testProfile2.avatar="tree.png";testProfile2._id=Meteor.uuid();console.log({testProfile1:testProfile1,testProfile2:testProfile2,defaultProfile:defaultProfile});this.testUser1=new User({_id:Meteor.uuid(),username:"testUser1",password:"hello",profile:testProfile1});this.testUser2=testUser1.clone();testUser2.username="testUser2";testUser2._id=Meteor.uuid();console.log({testUser1:testUser1,testUser2:testUser2,defaultUser:defaultUser});this.defaultMessage=new Chatmessage;this.Message1=new Chatmessage({owner:testUser1._id,message:"this test worked"});this.Message2=new Chatmessage({owner:testUser2._id,message:"this test worked too"});console.log({Message1:Message1,Message2:Message2,defaultMessage:defaultMessage});Meteor.call("insertchatmessage",Message1,function(n,t){return n!=null?console.log("insert failed :"+n):(console.log(t),t)})}).call(this);
/*
//# sourceMappingURL=collections.min.js.map
*/